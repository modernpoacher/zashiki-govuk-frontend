"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transformElementsToCheckboxesEnum=transformElementsToCheckboxesEnum;exports.transformElementsToCheckboxesAnyOf=transformElementsToCheckboxesAnyOf;exports.transformElementsToCheckboxesOneOf=transformElementsToCheckboxesOneOf;exports.transformElementsToCheckboxesField=transformElementsToCheckboxesField;exports.transformElementsToRadiosEnum=transformElementsToRadiosEnum;exports.transformElementsToRadiosAnyOf=transformElementsToRadiosAnyOf;exports.transformElementsToRadiosOneOf=transformElementsToRadiosOneOf;exports.transformElementsToSelectEnum=transformElementsToSelectEnum;exports.transformElementsToSelectAnyOf=transformElementsToSelectAnyOf;exports.transformElementsToSelectOneOf=transformElementsToSelectOneOf;exports.transformElementsToInputEnum=transformElementsToInputEnum;exports.transformElementsToInputAnyOf=transformElementsToInputAnyOf;exports.transformElementsToInputOneOf=transformElementsToInputOneOf;exports.transformElementsToInputField=transformElementsToInputField;exports.transformElementsToGroup=transformElementsToGroup;exports.transformFields=transformFields;exports.transformField=transformField;exports.transformElementsToRadiosForEnum=transformElementsToRadiosForEnum;exports.transformElementsToRadiosForAnyOf=transformElementsToRadiosForAnyOf;exports.transformElementsToRadiosForOneOf=transformElementsToRadiosForOneOf;exports.transformElementsToSelectForEnum=transformElementsToSelectForEnum;exports.transformElementsToSelectForAnyOf=transformElementsToSelectForAnyOf;exports.transformElementsToSelectForOneOf=transformElementsToSelectForOneOf;exports.transformElementsToInputForEnum=transformElementsToInputForEnum;exports.transformElementsToInputForAnyOf=transformElementsToInputForAnyOf;exports.transformElementsToInputForOneOf=transformElementsToInputForOneOf;exports.transformElementsToInputForField=transformElementsToInputForField;exports.transformFieldToCheckboxes=transformFieldToCheckboxes;exports.transformFieldToDateInput=transformFieldToDateInput;exports.transformFieldToFileUpload=transformFieldToFileUpload;exports.transformFieldToRadios=transformFieldToRadios;exports.transformFieldToSelect=transformFieldToSelect;exports.transformFieldToInput=transformFieldToInput;exports.transformFieldsToDateInput=transformFieldsToDateInput;exports.transformFieldsToFileUpload=transformFieldsToFileUpload;exports.transformFieldsToInput=transformFieldsToInput;exports.transformFieldsToComponent=transformFieldsToComponent;exports.transformFieldToComponent=transformFieldToComponent;exports.transformOne=transformOne;exports.transformAll=transformAll;exports.transformEmbark=transformEmbark;exports.transformAlpha=transformAlpha;exports.transformOmega=transformOmega;exports.transformDebark=transformDebark;exports.default=exports.transformFieldsToCheckboxes=exports.transformElementsToCheckboxesForField=exports.transformElementsToCheckboxesForOneOf=exports.transformElementsToCheckboxesForAnyOf=exports.transformElementsToCheckboxesForEnum=exports.transformTitleToFieldsetLegend=exports.transformTitleToLegend=exports.transformTitleToLabel=exports.transformTitleToText=exports.transformDescriptionToHint=exports.getName=void 0;var _debug=_interopRequireDefault(require("debug"));var _toZashiki=_interopRequireDefault(require("shinkansen-transmission/lib/transmission/to-zashiki"));var _fromDocumentToHash=_interopRequireDefault(require("shinkansen-transmission/lib/transmission/from-document-to-hash"));var _common=require("./common");var _error=require("./common/error");var _toErrorMessage=_interopRequireDefault(require("./to-error-message"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const log=(0,_debug.default)('zashiki:transformer:transform');const getName=({name}={})=>name?{name}:{};exports.getName=getName;const transformDescriptionToHint=(field={},text=null)=>({...field,...(text?{hint:{text}}:{})});exports.transformDescriptionToHint=transformDescriptionToHint;const transformTitleToText=(field={},text=null)=>({...field,...(text?{text}:{})});exports.transformTitleToText=transformTitleToText;const transformTitleToLabel=(field={},text=null)=>({...field,...(text?{label:{text}}:{})});exports.transformTitleToLabel=transformTitleToLabel;const transformTitleToLegend=(field={},text=null)=>({...field,...(text?{legend:{text}}:{})});exports.transformTitleToLegend=transformTitleToLegend;const transformTitleToFieldsetLegend=(field={},text=null)=>({...field,...(text?{fieldset:{legend:{text}}}:{})});exports.transformTitleToFieldsetLegend=transformTitleToFieldsetLegend;function transformElementsToCheckboxesEnum({selectedItems=[]}={},{enum:{items=[],id,name=id,...field}}={},{uri,parentUri=uri}={},{components,errors}={}){log('transformElementsToCheckboxesEnum');return{id:parentUri,items:items.map((value,index)=>({text:String(value),value:String(index),id,name,checked:selectedItems.includes(index)})),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,parentUri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,parentUri),components)}:{})};}function transformElementsToCheckboxesAnyOf({selectedItems=[]}={},{anyOf:{items=[],id,...field}}={},{uri,parentUri=uri}={},{components,errors}={}){log('transformElementsToCheckboxesAnyOf');return{id:parentUri,items:items.map(({elements:{title,description,field:{id,name=id}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),id,name,checked:selectedItems.includes(index)},title),description)),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,parentUri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,parentUri),components)}:{})};}function transformElementsToCheckboxesOneOf({selectedItems=[]}={},{oneOf:{items=[],id,...field}}={},{uri,parentUri=uri}={},{components,errors}={}){log('transformElementsToCheckboxesOneOf');return{id:parentUri,items:items.map(({elements:{title,description,field:{id,name=id}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),id,name,checked:selectedItems.includes(index)},title),description)),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,parentUri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,parentUri),components)}:{})};}function transformElementsToCheckboxesField({selectedItems=[]}={},{field:{value,id,name=id,...field}}={},{uri,parentUri=uri}={},{components,errors}={}){log('transformElementsToCheckboxesField');return{id:parentUri,items:[{text:value,value,id,name,checked:selectedItems.includes(value)}],...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,parentUri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,parentUri),components)}:{})};}function transformElementsToRadiosEnum({selectedItems=[],uri}={},{enum:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToRadiosEnum');return{id,name,items:items.map((value,index)=>{return{text:String(value),value:String(index),checked:selectedItems.includes(index)};}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToRadiosAnyOf({selectedItems=[],uri}={},{anyOf:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToRadiosAnyOf');return{id,name,items:items.map(({elements:{title,description,field:{id,value}={}}},index)=>{return transformDescriptionToHint({...(title?{text:title}:{text:String(value)}),value:String(index),id,checked:selectedItems.includes(index)},description);}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToRadiosOneOf({selectedItems=[],uri}={},{oneOf:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToRadiosOneOf');return{id,name,items:items.map(({elements:{title,description,field:{id,value}={}}},index)=>{return transformDescriptionToHint({...(title?{text:title}:{text:String(value)}),value:String(index),id,checked:selectedItems.includes(index)},description);}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToSelectEnum({selectedItems=[],uri}={},{enum:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToSelectEnum');return{id,name,items:items.map((value,index)=>{return{text:String(value),value:String(index),selected:selectedItems.includes(index)};}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToSelectAnyOf({selectedItems=[],uri}={},{anyOf:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToSelectAnyOf');return{id,name,items:items.map(({elements:{title,field:{value}}},index)=>{return{...(title?{text:title}:{text:String(value)}),value:String(index),selected:selectedItems.includes(index)};}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToSelectOneOf({selectedItems=[],uri}={},{oneOf:{id,name=id,items=[],...field}}={},{components,errors}={}){log('transformElementsToSelectOneOf');return{id,name,items:items.map(({elements:{title,field:{value}}},index)=>{return{...(title?{text:title}:{text:String(value)}),value:String(index),selected:selectedItems.includes(index)};}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToInputEnum({items=[],selectedItems=[],uri}={},{enum:{id,name=id,...field}}={},{components,errors}={}){log('transformElementsToInputEnum');return{items:items.map((value,index)=>({text:String(value),value:String(index),selected:selectedItems.includes(index)})),...(id?{id}:{}),...(name?{name}:{}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToInputAnyOf({items=[],selectedItems=[],uri}={},{anyOf:{id,name=id,...field}}={},{components,errors}={}){log('transformElementsToInputAnyOf');return{items:items.map(({elements:{title,description,field:{id,name=id}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),id,name,checked:selectedItems.includes(index)},title),description)),...(id?{id}:{}),...(name?{name}:{}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToInputOneOf({items=[],selectedItems=[],uri}={},{oneOf:{id,name=id,...field}}={},{components,errors}={}){log('transformElementsToInputOneOf');return{items:items.map(({elements:{title,description,field:{id,name=id}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),id,name,checked:selectedItems.includes(index)},title),description)),...(id?{id}:{}),...(name?{name}:{}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToInputField({uri}={},{field:{id,name=id,...field}}={},{components,errors}={}){log('transformElementsToInputField');return{...(id?{id}:{}),...(name?{name}:{}),...((0,_common.hasValue)(field)?{value:(0,_common.getValue)(field)}:{}),...((0,_common.hasRequired)(field)?{required:(0,_common.getRequired)(field)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformElementsToGroup({uri}={},{id,name=id,...elements}={},{components,errors}={}){log('transformElementsToGroup');return{...(id?{id}:{}),...(name?{name}:{}),...((0,_common.hasRequired)(elements)?{required:(0,_common.getRequired)(elements)}:{}),...((0,_common.hasValue)(elements)?{value:(0,_common.getValue)(elements)}:{}),...((0,_error.hasError)(errors,uri)?{errorMessage:(0,_toErrorMessage.default)((0,_error.getError)(errors,uri),components)}:{})};}function transformFields(meta,elements,params){log('transformFields');const{title,fields=[]}=elements;return{group:transformTitleToLegend(transformElementsToGroup(meta,elements,params),title),fields:fields.map(field=>transform(field,params))};}function transformField(meta,elements,params){log('transformField');if((0,_common.hasEnum)(elements)){log('transformField (`enum`)');return{enum:transformElementsToInputForEnum(meta,elements,params)};}else{if((0,_common.hasAnyOf)(elements)){log('transformField (`anyOf`)');return{anyOf:transformElementsToInputForAnyOf(meta,elements,params)};}else{if((0,_common.hasOneOf)(elements)){log('transformField (`oneOf`)');return{oneOf:transformElementsToInputForOneOf(meta,elements,params)};}else{log('transformField (`field`)');return{field:transformElementsToInputForField(meta,elements,params)};}}}}const transformElementsToCheckboxesForEnum=(meta,elements,parentMeta,{title,description}={},params={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesEnum(meta,elements,parentMeta,params),title),description);exports.transformElementsToCheckboxesForEnum=transformElementsToCheckboxesForEnum;const transformElementsToCheckboxesForAnyOf=(meta,elements,parentMeta,{title,description}={},params={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesAnyOf(meta,elements,parentMeta,params),title),description);exports.transformElementsToCheckboxesForAnyOf=transformElementsToCheckboxesForAnyOf;const transformElementsToCheckboxesForOneOf=(meta,elements,parentMeta,{title,description}={},params={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesOneOf(meta,elements,parentMeta,params),title),description);exports.transformElementsToCheckboxesForOneOf=transformElementsToCheckboxesForOneOf;const transformElementsToCheckboxesForField=(meta,elements,parentMeta,{title,description}={},params={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesField(meta,elements,parentMeta,params),title),description);exports.transformElementsToCheckboxesForField=transformElementsToCheckboxesForField;function transformElementsToRadiosForEnum(meta,elements,params){log('transformElementsToRadiosForEnum');const{title,description}=elements;return transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosEnum(meta,elements,params),title),description);}function transformElementsToRadiosForAnyOf(meta,elements,params){log('transformElementsToRadiosForAnyOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosAnyOf(meta,elements,params),title),description);}function transformElementsToRadiosForOneOf(meta,elements,params){log('transformElementsToRadiosForOneOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosOneOf(meta,elements,params),title),description);}function transformElementsToSelectForEnum(meta,elements,params){log('transformElementsToSelectForEnum');const{title,description}=elements;return transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectEnum(meta,elements,params),title),description);}function transformElementsToSelectForAnyOf(meta,elements,params){log('transformElementsToSelectForAnyOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectAnyOf(meta,elements,params),title),description);}function transformElementsToSelectForOneOf(meta,elements,params){log('transformElementsToSelectForOneOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectOneOf(meta,elements,params),title),description);}function transformElementsToInputForEnum(meta,elements,params){log('transformElementsToInputForEnum');const{title,description}=elements;return transformDescriptionToHint(transformTitleToLabel(transformElementsToInputEnum(meta,elements,params),title),description);}function transformElementsToInputForAnyOf(meta,elements,params){log('transformElementsToInputForAnyOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToInputAnyOf(meta,elements,params),title),description);}function transformElementsToInputForOneOf(meta,elements,params){log('transformElementsToInputForOneOf');const{title,description}=elements;return transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToInputOneOf(meta,elements,params),title),description);}function transformElementsToInputForField(meta,elements,params){log('transformElementsToInputForField');const{title,description}=elements;return transformDescriptionToHint(transformTitleToLabel(transformElementsToInputField(meta,elements,params),title),description);}function transformFieldToCheckboxes(meta,elements,parentMeta,parentElements,params){log('transformFieldToCheckboxes');if((0,_common.hasEnum)(elements)){log('transformFieldToCheckboxes (`enum`)');return{enum:transformElementsToCheckboxesForEnum(meta,elements,parentMeta,parentElements,params)};}else{if((0,_common.hasAnyOf)(elements)){log('transformFieldToCheckboxes (`anyOf`)');return{anyOf:transformElementsToCheckboxesForAnyOf(meta,elements,parentMeta,parentElements,params)};}else{if((0,_common.hasOneOf)(elements)){log('transformFieldToCheckboxes (`oneOf`)');return{oneOf:transformElementsToCheckboxesForOneOf(meta,elements,parentMeta,parentElements,params)};}else{log('transformFieldToCheckboxes (`field`)');return{field:transformElementsToCheckboxesForField(meta,elements,parentMeta,parentElements,params)};}}}}function transformFieldToDateInput(meta,elements,params){}function transformFieldToFileUpload(meta,elements,params){}function transformFieldToRadios(meta,elements,params){log('transformFieldToRadios');if((0,_common.hasEnum)(elements)){log('transformFieldToRadios (`enum`)');return{enum:transformElementsToRadiosForEnum(meta,elements,params)};}else{if((0,_common.hasAnyOf)(elements)){log('transformFieldToRadios (`anyOf`)');return{anyOf:transformElementsToRadiosForAnyOf(meta,elements,params)};}else{if((0,_common.hasOneOf)(elements)){log('transformFieldToRadios (`oneOf`)');return{oneOf:transformElementsToRadiosForOneOf(meta,elements,params)};}else{log('transformFieldToRadios (`field`)');throw new Error('Schema incompatible with component `radios`');}}}}function transformFieldToSelect(meta,elements,params){log('transformFieldToSelect');if((0,_common.hasEnum)(elements)){log('transformFieldToSelect (`enum`)');return{enum:transformElementsToSelectForEnum(meta,elements,params)};}else{if((0,_common.hasAnyOf)(elements)){log('transformFieldToSelect (`anyOf`)');return{anyOf:transformElementsToSelectForAnyOf(meta,elements,params)};}else{if((0,_common.hasOneOf)(elements)){log('transformFieldToSelect (`oneOf`)');return{oneOf:transformElementsToSelectForOneOf(meta,elements,params)};}else{log('transformFieldToSelect (`field`)');throw new Error('Schema incompatible with component `select`');}}}}function transformFieldToInput(meta,elements,params){log('transformFieldToInput');if((0,_common.hasEnum)(elements)){log('transformFieldToInput (`enum`)');return{enum:transformElementsToInputForEnum(meta,elements,params)};}else{if((0,_common.hasAnyOf)(elements)){log('transformFieldToInput (`anyOf`)');return{anyOf:transformElementsToInputForAnyOf(meta,elements,params)};}else{if((0,_common.hasOneOf)(elements)){log('transformFieldToInput (`oneOf`)');return{oneOf:transformElementsToInputForOneOf(meta,elements,params)};}else{log('transformFieldToInput (`field`)');return{field:transformElementsToInputForField(meta,elements,params)};}}}}const transformFieldsToCheckboxes=(parentMeta,{fields:[{meta,elements}={}]=[],title,description}={},params={})=>{log('transformFieldsToCheckboxes');return transformFieldToCheckboxes(meta,elements,parentMeta,{title,description},params);};exports.transformFieldsToCheckboxes=transformFieldsToCheckboxes;function transformFieldsToDateInput(meta,elements,params){log('transformFieldsToDateInput');const{title,fields=[]}=elements;return{group:transformTitleToLegend(transformElementsToGroup(meta,elements,params),title),fields:fields.map(field=>transform(field,params))};}function transformFieldsToFileUpload(meta,elements,params){log('transformFieldsToFileUpload');const{title,fields=[]}=elements;return{group:transformTitleToLegend(transformElementsToGroup(meta,elements,params),title),fields:fields.map(field=>transform(field,params))};}function transformFieldsToInput(meta,elements,params){log('transformFieldsToInput');const{title,fields=[]}=elements;return{group:transformTitleToLegend(transformElementsToGroup(meta,elements,params),title),fields:fields.map(field=>transform(field,params))};}function transformFieldsToComponent(meta,elements,params){log('transformFieldsToComponent');const{component}=meta;switch(component){case'checkboxes':return transformFieldsToCheckboxes(meta,elements,params);default:return transformFieldsToInput(meta,elements,params);}}function transformFieldToComponent(meta,elements,params){log('transformFieldToComponent');const{component}=meta;switch(component){case'date-input':return transformFieldToDateInput(meta,elements,params);case'file-upload':return transformFieldToFileUpload(meta,elements,params);case'radios':return transformFieldToRadios(meta,elements,params);case'select':return transformFieldToSelect(meta,elements,params);default:return transformFieldToInput(meta,elements,params);}}function transformOne({meta={},elements={}}={},params={}){log('transformOne');const{type}=meta;if((0,_common.hasComponent)(meta)){const component=(0,_common.getComponent)(meta);return{type,component,...transformFieldToComponent(meta,elements,params)};}else{return{type,...transformField(meta,elements,params)};}}function transformAll({meta={},elements={}}={},params={}){log('transformAll');const{type}=meta;if((0,_common.hasComponent)(meta)){const component=(0,_common.getComponent)(meta);return{type,component,...transformFieldsToComponent(meta,elements,params)};}else{return{type,...transformFields(meta,elements,params)};}}const transform=(zashiki={},params={})=>{log('transform');const{meta:{type}={}}=zashiki;return type==='object'||type==='array'?transformAll(zashiki,params):transformOne(zashiki,params);};function transformEmbark(definition,response,components={},errors=[]){log('transformEmbark');return transform((0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},components),{components,errors});}function transformAlpha(description,definition,response,{meta:{classes='govuk-fieldset__legend--m',isPageHeading=false,...meta}={},...components}={},errors=[]){log('transformAlpha');const zashiki=(0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},components);const{meta:{type}={}}=zashiki;if(type==='object'||type==='array'){return{zashiki:{group:{legend:{text:description,classes,isPageHeading}},fields:transformAll(zashiki,{components,errors})}};}return{zashiki:{group:{legend:{text:description,classes,isPageHeading}},fields:transformOne(zashiki,{components,errors})}};}function transformOmega(description,definition,response,{meta:{classes='govuk-fieldset__legend--l',isPageHeading=true,...meta}={},...components}={},errors=[]){log('transformOmega');const zashiki=(0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},{...components,meta:{...meta,isPageHeading:true}});const{meta:{type}={}}=zashiki;if(type==='object'||type==='array'){return{zashiki:{group:{legend:{text:description,classes,isPageHeading}},fields:transformAll(zashiki,{components,errors})}};}return{zashiki:{group:{legend:{text:description,classes,isPageHeading}},fields:transformOne(zashiki,{components,errors})}};}function transformDebark(definition,response,components={},errors=[]){log('transformDebark');return transform((0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},components),{components,errors});}var _default=(definition,response,components={},errors=[])=>transform((0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},components),{components,errors});exports.default=_default;