"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transformField=transformField;exports.transformFieldToCheckboxes=transformFieldToCheckboxes;exports.transformFieldToDateInput=transformFieldToDateInput;exports.transformFieldToFieldset=transformFieldToFieldset;exports.transformFieldToFileUpload=transformFieldToFileUpload;exports.transformFieldToRadios=transformFieldToRadios;exports.transformFieldToSelect=transformFieldToSelect;exports.transformFieldToInput=transformFieldToInput;exports.transformFieldsToDateInput=transformFieldsToDateInput;exports.transformFieldsToFieldset=transformFieldsToFieldset;exports.transformFieldsToFileUpload=transformFieldsToFileUpload;exports.transformFieldsToRadios=transformFieldsToRadios;exports.transformFieldsToSelect=transformFieldsToSelect;exports.transformFieldsToInput=transformFieldsToInput;exports.transformFieldsToComponent=transformFieldsToComponent;exports.transformFieldToComponent=transformFieldToComponent;exports.default=exports.transformAll=exports.transformOne=exports.transformFieldsToCheckboxes=exports.transformElementsToInputForField=exports.transformElementsToInputForOneOf=exports.transformElementsToInputForAnyOf=exports.transformElementsToInputForEnum=exports.transformElementsToSelectForField=exports.transformElementsToSelectForOneOf=exports.transformElementsToSelectForAnyOf=exports.transformElementsToSelectForEnum=exports.transformElementsToRadiosForField=exports.transformElementsToRadiosForOneOf=exports.transformElementsToRadiosForAnyOf=exports.transformElementsToRadiosForEnum=exports.transformElementsToCheckboxesForField=exports.transformElementsToCheckboxesForOneOf=exports.transformElementsToCheckboxesForAnyOf=exports.transformElementsToCheckboxesForEnum=exports.transformFields=exports.transformForField=exports.transformForFields=exports.transformElementsToInputField=exports.transformElementsToInputOneOf=exports.transformElementsToInputAnyOf=exports.transformElementsToInputEnum=exports.transformElementsToSelectField=exports.transformElementsToSelectOneOf=exports.transformElementsToSelectAnyOf=exports.transformElementsToSelectEnum=exports.transformElementsToRadiosField=exports.transformElementsToRadiosOneOf=exports.transformElementsToRadiosAnyOf=exports.transformElementsToRadiosEnum=exports.transformElementsToCheckboxesField=exports.transformElementsToCheckboxesOneOf=exports.transformElementsToCheckboxesAnyOf=exports.transformElementsToCheckboxesEnum=exports.transformTitleToFieldsetLegend=exports.transformTitleToLegend=exports.transformTitleToLabel=exports.transformTitleToText=exports.transformDescriptionToHint=exports.getName=exports.getValue=exports.hasValue=exports.getRequired=exports.hasRequired=exports.getComponent=exports.hasComponent=exports.getType=exports.hasType=exports.getAnyOf=exports.hasAnyOf=exports.getOneOf=exports.hasOneOf=exports.getEnum=exports.hasEnum=void 0;var _toZashiki=_interopRequireDefault(require("shinkansen-transmission/lib/transmission/to-zashiki"));var _fromDocumentToHash=_interopRequireDefault(require("shinkansen-transmission/lib/transmission/from-document-to-hash"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}const hasEnum=(field={})=>Reflect.has(field,'enum');exports.hasEnum=hasEnum;const getEnum=(field={})=>Reflect.get(field,'enum');exports.getEnum=getEnum;const hasOneOf=(field={})=>Reflect.has(field,'oneOf');exports.hasOneOf=hasOneOf;const getOneOf=(field={})=>Reflect.get(field,'oneOf');exports.getOneOf=getOneOf;const hasAnyOf=(field={})=>Reflect.has(field,'anyOf');exports.hasAnyOf=hasAnyOf;const getAnyOf=(field={})=>Reflect.get(field,'anyOf');exports.getAnyOf=getAnyOf;const hasType=(meta={})=>Reflect.has(meta,'type');exports.hasType=hasType;const getType=(meta={})=>Reflect.get(meta,'type');exports.getType=getType;const hasComponent=(meta={})=>Reflect.has(meta,'component');exports.hasComponent=hasComponent;const getComponent=(meta={})=>Reflect.get(meta,'component');exports.getComponent=getComponent;const hasRequired=field=>Reflect.has(field,'required');exports.hasRequired=hasRequired;const getRequired=field=>Reflect.get(field,'required');exports.getRequired=getRequired;const hasValue=field=>Reflect.has(field,'value');exports.hasValue=hasValue;const getValue=field=>Reflect.get(field,'value');exports.getValue=getValue;const getName=({name}={})=>name?{name}:{};exports.getName=getName;const transformDescriptionToHint=(field={},text)=>({...field,...(text?{hint:{text}}:{})});exports.transformDescriptionToHint=transformDescriptionToHint;const transformTitleToText=(field={},text)=>({...field,...(text?{text}:{})});exports.transformTitleToText=transformTitleToText;const transformTitleToLabel=(field={},text)=>({...field,...(text?{label:{text}}:{})});exports.transformTitleToLabel=transformTitleToLabel;const transformTitleToLegend=(field={},text)=>({...field,...(text?{legend:{text}}:{})});exports.transformTitleToLegend=transformTitleToLegend;const transformTitleToFieldsetLegend=(field={},text)=>({...field,...(text?{fieldset:{legend:{text}}}:{})});exports.transformTitleToFieldsetLegend=transformTitleToFieldsetLegend;const transformElementsToCheckboxesEnum=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map((value,index)=>({text:String(value),value:String(index),name,id,checked:selectedItems.includes(index)})),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToCheckboxesEnum=transformElementsToCheckboxesEnum;const transformElementsToCheckboxesAnyOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToCheckboxesAnyOf=transformElementsToCheckboxesAnyOf;const transformElementsToCheckboxesOneOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToCheckboxesOneOf=transformElementsToCheckboxesOneOf;const transformElementsToCheckboxesField=({value,selectedItems=[],name,id=name,...field})=>({items:[{text:value,value,checked:selectedItems.includes(value)}],...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToCheckboxesField=transformElementsToCheckboxesField;const transformElementsToRadiosEnum=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map((value,index)=>({text:String(value),value:String(index),checked:selectedItems.includes(index)})),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToRadiosEnum=transformElementsToRadiosEnum;const transformElementsToRadiosAnyOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToRadiosAnyOf=transformElementsToRadiosAnyOf;const transformElementsToRadiosOneOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToRadiosOneOf=transformElementsToRadiosOneOf;const transformElementsToRadiosField=({value,name,id=name,...field})=>({items:[{text:value,value,checked:value!==undefined}],...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToRadiosField=transformElementsToRadiosField;const transformElementsToSelectEnum=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map((value,index)=>({text:String(value),value:String(index),selected:selectedItems.includes(index)})),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToSelectEnum=transformElementsToSelectEnum;const transformElementsToSelectAnyOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title}},index)=>{const value=String(index);return{...(title?{text:title}:{text:value}),value,selected:selectedItems.includes(index)};}),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToSelectAnyOf=transformElementsToSelectAnyOf;const transformElementsToSelectOneOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title}},index)=>{const value=String(index);return{...(title?{text:title}:{text:value}),value:value,selected:selectedItems.includes(index)};}),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToSelectOneOf=transformElementsToSelectOneOf;const transformElementsToSelectField=({value,name,id=name,...field})=>({items:[{text:value,value,selected:value!==undefined}],...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToSelectField=transformElementsToSelectField;const transformElementsToInputEnum=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map((value,index)=>({text:String(value),value:String(index),selected:selectedItems.includes(index)})),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToInputEnum=transformElementsToInputEnum;const transformElementsToInputAnyOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToInputAnyOf=transformElementsToInputAnyOf;const transformElementsToInputOneOf=({items=[],selectedItems=[],name,id=name,...field})=>({items:items.map(({elements:{title,description,field:{name,id=name}={}}},index)=>transformDescriptionToHint(transformTitleToText({value:String(index),name,id,checked:selectedItems.includes(index)},title),description)),...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToInputOneOf=transformElementsToInputOneOf;const transformElementsToInputField=({name,id=name,...field})=>({...(name?{name}:{}),...(id?{id}:{}),...(hasValue(field)?{value:getValue(field)}:{}),...(hasRequired(field)?{required:getRequired(field)}:{})});exports.transformElementsToInputField=transformElementsToInputField;const transformForFields=({name,id=name,fields=[],...field}={})=>({...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{}),...(hasValue(field)?{value:getValue(field)}:{}),fields:fields.map(transform),...field});exports.transformForFields=transformForFields;const transformForField=({name,id=name,...field}={})=>({...(name?{name}:{}),...(id?{id}:{}),...(hasRequired(field)?{required:getRequired(field)}:{}),...(hasValue(field)?{value:getValue(field)}:{}),...field});exports.transformForField=transformForField;const transformFields=elements=>{const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToFieldsetLegend(transformForField(elements),title),description),fields:fields.map(transform)};};exports.transformFields=transformFields;function transformField(elements){if(hasEnum(elements)){return{enum:transformElementsToInputForEnum(elements)};}else{if(hasAnyOf(elements)){return{anyOf:transformElementsToInputForAnyOf(elements)};}else{if(hasOneOf(elements)){return{oneOf:transformElementsToInputForOneOf(elements)};}else{return{field:transformElementsToInputForField(elements)};}}}}const transformElementsToCheckboxesForEnum=({enum:{...field}}={},{title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesEnum(field),title),description);exports.transformElementsToCheckboxesForEnum=transformElementsToCheckboxesForEnum;const transformElementsToCheckboxesForAnyOf=({anyOf:{...field}}={},{title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesAnyOf(field),title),description);exports.transformElementsToCheckboxesForAnyOf=transformElementsToCheckboxesForAnyOf;const transformElementsToCheckboxesForOneOf=({oneOf:{...field}}={},{title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesOneOf(field),title),description);exports.transformElementsToCheckboxesForOneOf=transformElementsToCheckboxesForOneOf;const transformElementsToCheckboxesForField=({field}={},{title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToCheckboxesField(field),title),description);exports.transformElementsToCheckboxesForField=transformElementsToCheckboxesForField;const transformElementsToRadiosForEnum=({enum:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosEnum(field),title),description);exports.transformElementsToRadiosForEnum=transformElementsToRadiosForEnum;const transformElementsToRadiosForAnyOf=({anyOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosAnyOf(field),title),description);exports.transformElementsToRadiosForAnyOf=transformElementsToRadiosForAnyOf;const transformElementsToRadiosForOneOf=({oneOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosOneOf(field),title),description);exports.transformElementsToRadiosForOneOf=transformElementsToRadiosForOneOf;const transformElementsToRadiosForField=({field,title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToRadiosField(field),title),description);exports.transformElementsToRadiosForField=transformElementsToRadiosForField;const transformElementsToSelectForEnum=({enum:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectEnum(field),title),description);exports.transformElementsToSelectForEnum=transformElementsToSelectForEnum;const transformElementsToSelectForAnyOf=({anyOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectOneOf(field),title),description);exports.transformElementsToSelectForAnyOf=transformElementsToSelectForAnyOf;const transformElementsToSelectForOneOf=({oneOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectOneOf(field),title),description);exports.transformElementsToSelectForOneOf=transformElementsToSelectForOneOf;const transformElementsToSelectForField=({field,title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToSelectField(field),title),description);exports.transformElementsToSelectForField=transformElementsToSelectForField;const transformElementsToInputForEnum=({enum:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToInputEnum(field),title),description);exports.transformElementsToInputForEnum=transformElementsToInputForEnum;const transformElementsToInputForAnyOf=({anyOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToInputAnyOf(field),title),description);exports.transformElementsToInputForAnyOf=transformElementsToInputForAnyOf;const transformElementsToInputForOneOf=({oneOf:{...field},title,description}={})=>transformDescriptionToHint(transformTitleToFieldsetLegend(transformElementsToInputOneOf(field),title),description);exports.transformElementsToInputForOneOf=transformElementsToInputForOneOf;const transformElementsToInputForField=({field,title,description}={})=>transformDescriptionToHint(transformTitleToLabel(transformElementsToInputField(field),title),description);exports.transformElementsToInputForField=transformElementsToInputForField;function transformFieldToCheckboxes(elements,parentElements){if(hasEnum(elements)){return{enum:transformElementsToCheckboxesForEnum(elements,parentElements)};}else{if(hasAnyOf(elements)){return{anyOf:transformElementsToCheckboxesForAnyOf(elements,parentElements)};}else{if(hasOneOf(elements)){return{oneOf:transformElementsToCheckboxesForOneOf(elements,parentElements)};}else{return{field:transformElementsToCheckboxesForField(elements,parentElements)};}}}}function transformFieldToDateInput(elements){}function transformFieldToFieldset(elements){}function transformFieldToFileUpload(elements){}function transformFieldToRadios(elements){if(hasEnum(elements)){return{enum:transformElementsToRadiosForEnum(elements)};}else{if(hasAnyOf(elements)){return{anyOf:transformElementsToRadiosForAnyOf(elements)};}else{if(hasOneOf(elements)){return{oneOf:transformElementsToRadiosForOneOf(elements)};}else{return{field:transformElementsToRadiosForField(elements)};}}}}function transformFieldToSelect(elements){if(hasEnum(elements)){return{enum:transformElementsToSelectForEnum(elements)};}else{if(hasAnyOf(elements)){return{anyOf:transformElementsToSelectForAnyOf(elements)};}else{if(hasOneOf(elements)){return{oneOf:transformElementsToSelectForOneOf(elements)};}else{return{field:transformElementsToSelectForField(elements)};}}}}function transformFieldToInput(elements){if(hasEnum(elements)){return{enum:transformElementsToInputForEnum(elements)};}else{if(hasAnyOf(elements)){return{anyOf:transformElementsToInputForAnyOf(elements)};}else{if(hasOneOf(elements)){return{oneOf:transformElementsToInputForOneOf(elements)};}else{return{field:transformElementsToInputForField(elements)};}}}}const transformFieldsToCheckboxes=({fields:[{elements}={}]=[],title,description}={})=>transformFieldToCheckboxes(elements,{title,description});exports.transformFieldsToCheckboxes=transformFieldsToCheckboxes;function transformFieldsToDateInput(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToFieldset(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToFileUpload(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToRadios(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToSelect(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToInput(elements){const{title,description,fields=[]}=elements;return{...transformDescriptionToHint(transformTitleToLegend(transformForField(elements),title),description),fields:fields.map(transform)};}function transformFieldsToComponent(meta,elements){const{component}=meta;switch(component){case'checkboxes':return transformFieldsToCheckboxes(elements);case'date-input':return transformFieldsToDateInput(elements);case'fieldset':return transformFieldsToFieldset(elements);case'file-upload':return transformFieldsToFileUpload(elements);case'radios':return transformFieldsToSelect(elements);case'select':return transformFieldsToRadios(elements);default:return transformFieldsToInput(elements);}}function transformFieldToComponent(meta,elements){const{component}=meta;switch(component){case'checkboxes':return transformFieldToCheckboxes(elements);case'date-input':return transformFieldToDateInput(elements);case'fieldset':return transformFieldToFieldset(elements);case'file-upload':return transformFieldToFileUpload(elements);case'radios':return transformFieldToRadios(elements);case'select':return transformFieldToSelect(elements);default:return transformFieldToInput(elements);}}const transformOne=({meta={},elements={}}={})=>{const type=getType(meta);if(hasComponent(meta)){const component=getComponent(meta);return{type,component,...transformFieldToComponent(meta,elements)};}else{return{type,...transformField(elements)};}};exports.transformOne=transformOne;const transformAll=({meta={},elements={}}={})=>{const type=getType(meta);if(hasComponent(meta)){const component=getComponent(meta);return{type,component,...transformFieldsToComponent(meta,elements)};}else{return{type,...transformFields(elements)};}};exports.transformAll=transformAll;const transform=(zashiki={})=>{const{meta:{type}={}}=zashiki;return type==='object'||type==='array'?transformAll(zashiki):transformOne(zashiki);};var _default=(definition,response,components)=>transform((0,_toZashiki.default)(definition,response!==undefined?(0,_fromDocumentToHash.default)(response,definition):{},components));exports.default=_default;